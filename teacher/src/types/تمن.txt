Ø§Ù„Ù…Ù„ÙØ§Øª:

image-processing.types.ts
iraqi-teacher.types.ts


ğŸ“„ 1. image-processing.types.ts
typescript// src/types/image-processing.types.ts

/**
 * Ø£Ù†ÙˆØ§Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ± - Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡Ø¬ÙŠÙ† Ø§Ù„Ø°ÙƒÙŠ
 */

// ====================================
// Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØµÙˆØ±
// ====================================

export type ImageFormat = 'jpeg' | 'jpg' | 'png' | 'webp' | 'heic' | 'heif';

export interface UploadedImage {
  file: File;
  preview: string;
  format: ImageFormat;
  size: number; // Ø¨Ø§Ù„Ø¨Ø§ÙŠØª
  width?: number;
  height?: number;
  uploadedAt: Date;
}

// ====================================
// ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©
// ====================================

export type ContentType = 
  | 'text-clear'           // Ù†Øµ ÙˆØ§Ø¶Ø­ Ù…Ø·Ø¨ÙˆØ¹
  | 'text-handwritten'     // Ù†Øµ Ù…ÙƒØªÙˆØ¨ Ø¨Ø§Ù„ÙŠØ¯
  | 'math-problem'         // Ù…Ø³Ø£Ù„Ø© Ø±ÙŠØ§Ø¶ÙŠØ©
  | 'diagram'              // Ù…Ø®Ø·Ø· Ø£Ùˆ Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ
  | 'drawing'              // Ø±Ø³Ù…Ø©
  | 'mixed'                // Ù…Ø­ØªÙˆÙ‰ Ù…Ø®ØªÙ„Ø·
  | 'unknown';             // ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ

export type ImageQuality = 'excellent' | 'good' | 'fair' | 'poor' | 'very-poor';

export interface ImageAnalysisResult {
  contentType: ContentType;
  quality: ImageQuality;
  hasArabicText: boolean;
  hasEnglishText: boolean;
  hasMath: boolean;
  hasDiagrams: boolean;
  isHandwritten: boolean;
  rotation?: number; // Ø¯Ø±Ø¬Ø© Ø§Ù„Ø¯ÙˆØ±Ø§Ù† Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
  needsEnhancement: boolean;
  confidence: number; // 0-1
}

// ====================================
// Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
// ====================================

export type ProcessingStrategy = 
  | 'ocr-first'      // OCR Ø£ÙˆÙ„Ø§Ù‹ Ø«Ù… Vision Ø¥Ù† ÙØ´Ù„
  | 'vision-first'   // Vision Ø£ÙˆÙ„Ø§Ù‹ Ø«Ù… OCR Ø¥Ù† ÙØ´Ù„
  | 'parallel'       // Ø§Ù„Ø§Ø«Ù†ÙŠÙ† Ù…Ø¹Ø§Ù‹ Ø¨Ø´ÙƒÙ„ Ù…ØªÙˆØ§Ø²ÙŠ
  | 'adaptive';      // ØªÙƒÙŠÙÙŠ Ø°ÙƒÙŠ (ÙŠØ®ØªØ§Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)

export type ProcessorType = 'ocr' | 'vision' | 'hybrid';

// ====================================
// Ù…Ø²ÙˆØ¯ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø§Øª
// ====================================

export type VisionProvider = 'claude' | 'gpt4' | 'gemini';
export type OCRProvider = 'tesseract' | 'google-vision' | 'azure';

// ====================================
// Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
// ====================================

export interface OCRResult {
  provider: OCRProvider;
  text: string;
  confidence: number;
  language: string;
  processingTime: number; // Ù…ÙŠÙ„ÙŠ Ø«Ø§Ù†ÙŠØ©
  success: boolean;
  error?: string;
}

export interface VisionResult {
  provider: VisionProvider;
  description: string;
  extractedText?: string;
  detectedObjects?: string[];
  confidence: number;
  processingTime: number;
  success: boolean;
  error?: string;
}

export interface ProcessingResult {
  strategy: ProcessingStrategy;
  processorUsed: ProcessorType;
  finalText: string;
  confidence: number;
  totalProcessingTime: number;
  ocrResult?: OCRResult;
  visionResult?: VisionResult;
  analysisResult: ImageAnalysisResult;
  success: boolean;
  error?: string;
  timestamp: Date;
}

// ====================================
// Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
// ====================================

export interface ProcessingOptions {
  strategy?: ProcessingStrategy;
  preferredVisionProvider?: VisionProvider;
  preferredOCRProvider?: OCRProvider;
  enableFallback?: boolean;
  maxRetries?: number;
  timeout?: number; // Ù…ÙŠÙ„ÙŠ Ø«Ø§Ù†ÙŠØ©
  enhanceImage?: boolean;
  fixArabicText?: boolean;
  cacheResults?: boolean;
}

export interface ProcessingConfig {
  // Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø¬ÙˆØ¯Ø©
  qualityThresholds: {
    excellent: number;
    good: number;
    fair: number;
    poor: number;
  };
  
  // Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø«Ù‚Ø©
  confidenceThresholds: {
    high: number;    // > 0.9
    medium: number;  // > 0.7
    low: number;     // > 0.5
  };
  
  // Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
  strategyByContent: Record<ContentType, ProcessingStrategy>;
  
  // Fallback order
  visionFallbackOrder: VisionProvider[];
  ocrFallbackOrder: OCRProvider[];
  
  // Timeouts
  timeouts: {
    vision: number;
    ocr: number;
    total: number;
  };
  
  // Ø§Ù„ØªÙƒÙ„ÙØ© (ØªÙ‚Ø¯ÙŠØ±ÙŠØ©)
  costs: {
    vision: Record<VisionProvider, number>;
    ocr: Record<OCRProvider, number>;
  };
}

// ====================================
// Cache
// ====================================

export interface CachedResult {
  imageHash: string;
  result: ProcessingResult;
  cachedAt: Date;
  expiresAt: Date;
}

// ====================================
// Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØ§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©
// ====================================

export interface ProcessingStats {
  totalRequests: number;
  successfulRequests: number;
  failedRequests: number;
  averageProcessingTime: number;
  strategyUsageCount: Record<ProcessingStrategy, number>;
  providerUsageCount: {
    vision: Record<VisionProvider, number>;
    ocr: Record<OCRProvider, number>;
  };
  totalCost: number;
  cacheHitRate: number;
}

// ====================================
// Errors
// ====================================

export type ProcessingErrorType =
  | 'image-invalid'
  | 'image-too-large'
  | 'image-corrupted'
  | 'ocr-failed'
  | 'vision-failed'
  | 'all-providers-failed'
  | 'timeout'
  | 'api-error'
  | 'network-error'
  | 'unknown';

export interface ProcessingError {
  type: ProcessingErrorType;
  message: string;
  details?: any;
  timestamp: Date;
}

ğŸ“„ 2. iraqi-teacher.types.ts
typescript// src/types/iraqi-teacher.types.ts

/**
 * Ø£Ù†ÙˆØ§Ø¹ Ø´Ø®ØµÙŠØ© Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠ
 */

import { ProcessingResult } from './image-processing.types';

// ====================================
// Ø§Ù„ØµÙÙˆÙ ÙˆØ§Ù„Ù…ÙˆØ§Ø¯
// ====================================

export type Grade = '1' | '2' | '3' | '4' | '5' | '6';

export type Subject = 
  | 'math'          // Ø±ÙŠØ§Ø¶ÙŠØ§Øª
  | 'arabic'        // Ø¹Ø±Ø¨ÙŠ
  | 'science'       // Ø¹Ù„ÙˆÙ…
  | 'social'        // Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª
  | 'english'       // Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ
  | 'islamic'       // ØªØ±Ø¨ÙŠØ© Ø¥Ø³Ù„Ø§Ù…ÙŠØ©
  | 'general';      // Ø¹Ø§Ù…

export interface SubjectInfo {
  id: Subject;
  nameArabic: string;
  nameDialect: string; // Ø¨Ø§Ù„Ù„Ù‡Ø¬Ø© Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠØ©
  icon: string;
  color: string;
}

export interface GradeInfo {
  id: Grade;
  nameArabic: string;
  nameDialect: string;
  ageRange: string;
  subjects: Subject[];
}

// ====================================
// Ø§Ù„Ù…Ù†Ø§Ù‡Ø¬ Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠØ©
// ====================================

export interface CurriculumTopic {
  id: string;
  subject: Subject;
  grade: Grade;
  title: string;
  titleDialect: string;
  description: string;
  keywords: string[];
  examples: string[];
  commonMistakes: string[];
  teachingTips: string[];
}

export interface Curriculum {
  grade: Grade;
  subjects: {
    [key in Subject]?: CurriculumTopic[];
  };
}

// ====================================
// Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØ§Ù„Ø±Ø¯ÙˆØ¯
// ====================================

export type RequestType = 
  | 'explain-homework'    // Ø´Ø±Ø­ ÙˆØ§Ø¬Ø¨
  | 'explain-lesson'      // Ø´Ø±Ø­ Ø¯Ø±Ø³
  | 'explain-concept'     // Ø´Ø±Ø­ Ù…ÙÙ‡ÙˆÙ…
  | 'solve-problem'       // Ø­Ù„ Ù…Ø³Ø£Ù„Ø©
  | 'check-answer'        // ØªØµØ­ÙŠØ­ Ø¥Ø¬Ø§Ø¨Ø©
  | 'general-question';   // Ø³Ø¤Ø§Ù„ Ø¹Ø§Ù…

export interface StudentRequest {
  id: string;
  type: RequestType;
  subject?: Subject;
  grade?: Grade;
  message: string;
  image?: ProcessingResult; // Ø¥Ø°Ø§ ÙƒØ§Ù† ÙÙŠÙ‡ ØµÙˆØ±Ø©
  timestamp: Date;
}

export interface TeacherResponse {
  id: string;
  requestId: string;
  explanation: string; // Ø§Ù„Ø´Ø±Ø­ Ø¨Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠ
  steps?: ExplanationStep[]; // Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø´Ø±Ø­
  encouragement: string; // Ø¬Ù…Ù„Ø© ØªØ´Ø¬ÙŠØ¹
  followUpQuestions?: string[]; // Ø£Ø³Ø¦Ù„Ø© Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ÙÙ‡Ù…
  relatedTopics?: string[]; // Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø°Ø§Øª ØµÙ„Ø©
  timestamp: Date;
}

export interface ExplanationStep {
  stepNumber: number;
  title: string;
  description: string;
  example?: string;
  image?: string; // Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© ØªÙˆØ¶ÙŠØ­ÙŠØ©
}

// ====================================
// Ø§Ù„Ù„Ù‡Ø¬Ø© Ø§Ù„Ø¨ØºØ¯Ø§Ø¯ÙŠØ©
// ====================================

export interface DialectPhrase {
  standard: string; // Ø§Ù„ÙØµØ­Ù‰
  dialect: string;  // Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠ
  context: string;  // Ù…ØªÙ‰ Ù†Ø³ØªØ®Ø¯Ù…Ù‡Ø§
}

export interface DialectConfig {
  greetings: DialectPhrase[];
  encouragement: DialectPhrase[];
  explanationStarters: DialectPhrase[];
  questionPhrases: DialectPhrase[];
  transitions: DialectPhrase[];
  closings: DialectPhrase[];
}

// ====================================
// Ø´Ø®ØµÙŠØ© Ø§Ù„Ù…Ø¹Ù„Ù…
// ====================================

export interface TeacherPersona {
  id: string;
  name: string;
  nameDialect: string; // "Ø¹Ù…Ùˆ Ø£Ø­Ù…Ø¯" Ù…Ø«Ù„Ø§Ù‹
  avatar: string;
  personality: {
    style: 'patient' | 'energetic' | 'calm'; // ØµØ¨ÙˆØ±
    tone: 'friendly' | 'formal' | 'playful'; // ÙˆØ¯ÙˆØ¯
    humor: boolean; // ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„ÙÙƒØ§Ù‡Ø©ØŸ
  };
  specialties: Subject[];
  experience: string;
  motto: string; // Ø´Ø¹Ø§Ø±Ù‡
  mottoDialect: string;
}

// ====================================
// Ø§Ù„Ø¬Ù„Ø³Ø©
// ====================================

export interface TeachingSession {
  id: string;
  studentId?: string;
  grade?: Grade;
  subject?: Subject;
  startedAt: Date;
  lastActivityAt: Date;
  requests: StudentRequest[];
  responses: TeacherResponse[];
  learningProgress: {
    understoodTopics: string[];
    needsReview: string[];
    strengths: string[];
    weaknesses: string[];
  };
}

// ====================================
// Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
// ====================================

export interface TeacherSettings {
  useDialect: boolean; // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù„Ù‡Ø¬Ø© Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠØ©
  dialectLevel: 'full' | 'mixed' | 'minimal'; // Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù„Ù‡Ø¬Ø©
  detailLevel: 'simple' | 'moderate' | 'detailed'; // Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªÙØµÙŠÙ„
  useEmojis: boolean;
  useEncouragement: boolean;
  maxExplanationLength: number;
  askFollowUpQuestions: boolean;
  provideExamples: boolean;
}

// ====================================
// System Prompt
// ====================================

export interface SystemPromptConfig {
  basePrompt: string;
  gradeSpecificPrompts: Record<Grade, string>;
  subjectSpecificPrompts: Record<Subject, string>;
  dialectInstructions: string;
  exampleConversations: Array<{
    student: string;
    teacher: string;
  }>;
}

// ====================================
// Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª (Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©)
// ====================================

export interface StudentAnalytics {
  studentId: string;
  totalSessions: number;
  totalQuestions: number;
  subjectsAsked: Record<Subject, number>;
  averageResponseTime: number;
  satisfactionRate?: number;
  progressOverTime: Array<{
    date: Date;
    topic: string;
    understood: boolean;
  }>;
}